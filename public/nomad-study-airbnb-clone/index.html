<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Nomad Study Airbnb Clone - 사랑합니다 기술 블로그</title><meta name="Description" content=""><meta property="og:title" content="Nomad Study Airbnb Clone" />
<meta property="og:description" content="Flask vs Django Flask 괭장히 작은 프레임워크. 데이터베이스, 이메일, 로그인, 로그아웃 등 모든 것을 다 만들어야 한다.
목표한 기능에 집중한다면 괜찮은 프레임워크
Django 거대한 프레임워크. 이미 많은 유틸리티가 장착되어있다
Pinterest, instagram
pipenv python 환경을 설정하는 package
python3 사용 pipenv --three
Pipfile이 생성된다
Pipfile packge-json과 같은 기능
장고 설치 1 2  pipenv shell pip install Django==2.2.5   github 1  git branch -M main   config파일 만들기 1 2 3 4  django-admin startproject config move config Aconfig mv Aconfig/* ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://i-loveu.github.io/nomad-study-airbnb-clone/" />
<meta property="article:published_time" content="2021-04-12T15:41:07+09:00" />
<meta property="article:modified_time" content="2021-04-12T15:41:07+09:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Nomad Study Airbnb Clone"/>
<meta name="twitter:description" content="Flask vs Django Flask 괭장히 작은 프레임워크. 데이터베이스, 이메일, 로그인, 로그아웃 등 모든 것을 다 만들어야 한다.
목표한 기능에 집중한다면 괜찮은 프레임워크
Django 거대한 프레임워크. 이미 많은 유틸리티가 장착되어있다
Pinterest, instagram
pipenv python 환경을 설정하는 package
python3 사용 pipenv --three
Pipfile이 생성된다
Pipfile packge-json과 같은 기능
장고 설치 1 2  pipenv shell pip install Django==2.2.5   github 1  git branch -M main   config파일 만들기 1 2 3 4  django-admin startproject config move config Aconfig mv Aconfig/* ."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://i-loveu.github.io/nomad-study-airbnb-clone/" /><link rel="prev" href="https://i-loveu.github.io/commit-message-on-git/" /><link rel="next" href="https://i-loveu.github.io/django-explain/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Nomad Study Airbnb Clone",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/i-loveu.github.io\/nomad-study-airbnb-clone\/"
        },"genre": "posts","keywords": "study, python","wordcount":  1693 ,
        "url": "https:\/\/i-loveu.github.io\/nomad-study-airbnb-clone\/","datePublished": "2021-04-12T15:41:07+09:00","dateModified": "2021-04-12T15:41:07+09:00","publisher": {
            "@type": "Organization",
            "name": "ahntae"},"author": {
                "@type": "Person",
                "name": "ahntae"
            },"description": ""
    }
    </script><script data-ad-client="ca-pub-4726317611282078" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="사랑합니다 기술 블로그">사랑합니다 기술 블로그</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="사랑합니다 기술 블로그">사랑합니다 기술 블로그</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Nomad Study Airbnb Clone</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://iloveu.design" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>ahntae</a></span>&nbsp;<span class="post-category">included in <a href="/categories/nomadcoder/"><i class="far fa-folder fa-fw"></i>nomadcoder</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-04-12">2021-04-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1693 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;8 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#flask-vs-django">Flask vs Django</a>
      <ul>
        <li><a href="#flask">Flask</a></li>
        <li><a href="#django">Django</a></li>
      </ul>
    </li>
    <li><a href="#pipenv">pipenv</a></li>
    <li><a href="#python3-사용">python3 사용</a>
      <ul>
        <li><a href="#pipfile">Pipfile</a></li>
      </ul>
    </li>
    <li><a href="#장고-설치">장고 설치</a></li>
    <li><a href="#github">github</a></li>
    <li><a href="#config파일-만들기">config파일 만들기</a></li>
    <li><a href="#vs-code-extension-설치">vs code extension 설치</a></li>
    <li><a href="#python-version-확인">python version 확인</a></li>
    <li><a href="#flake8-linter-설치">flake8 linter 설치</a></li>
    <li><a href="#formater-세팅">formater 세팅</a></li>
    <li><a href="#timezone-change">timezone change</a></li>
    <li><a href="#server-띄우기">server 띄우기</a></li>
    <li><a href="#migration">migration</a></li>
    <li><a href="#super-user-만들기">super user 만들기</a></li>
    <li><a href="#applicaitons-만들기">applicaitons 만들기</a></li>
    <li><a href="#users--modelspy-abstractuser-import">users &gt; models.py AbstractUser import</a></li>
    <li><a href="#configsettingspy-에-추가된-model-적용">config/settings.py 에 추가된 model 적용</a></li>
    <li><a href="#database-생성--create-model-user">database 생성 + Create Model User</a></li>
    <li><a href="#super-user-만들기-1">super user 만들기</a></li>
    <li><a href="#admin-penel에-user-추가">admin penel에 user 추가</a></li>
    <li><a href="#user에-bio-추가">user에 bio 추가</a></li>
    <li><a href="#pipenv-install-pillow">pipenv install Pillow</a></li>
    <li><a href="#mirgration">mirgration</a></li>
    <li><a href="#form-을-위한-null-처리">form 을 위한 null 처리</a></li>
    <li><a href="#user-adminpy-설명">user admin.py 설명</a></li>
    <li><a href="#admin-user-list에-칼럼-나타내기">admin user list에 칼럼 나타내기</a></li>
    <li><a href="#admin-user-list에-filter-추가">admin user list에 filter 추가</a></li>
    <li><a href="#admin-penel-에-useradmin을-적용하자">admin penel 에 UserAdmin을 적용하자</a></li>
    <li><a href="#useradminfieldsets-합치기">UserAdmin.fieldsets 합치기</a></li>
    <li><a href="#db-초기화">DB 초기화</a></li>
    <li><a href="#rooms-만들기">Rooms 만들기</a></li>
    <li><a href="#core-app-생성">Core app 생성</a></li>
    <li><a href="#core-model-적용">Core model 적용</a></li>
    <li><a href="#django-contries-library-사용">django-contries library 사용</a></li>
    <li><a href="#room-필드-연결시-보여줄-내용-설계">Room 필드 연결시 보여줄 내용 설계</a></li>
    <li><a href="#admin-penel에-roomtype-추가">admin penel에 RoomType 추가</a></li>
    <li><a href="#같은-방법으로-amenity-facility-houserole-추가">같은 방법으로 Amenity, Facility, HouseRole 추가</a></li>
    <li><a href="#admin-penel-에-나오는-이름-변경">admin penel 에 나오는 이름 변경</a>
      <ul>
        <li><a href="#verbose_name_plural">verbose_name_plural</a></li>
        <li><a href="#verbose_name">verbose_name</a></li>
        <li><a href="#ordering-정렬-순서">ordering 정렬 순서</a></li>
        <li><a href="#photo-model-만들기">photo model 만들기</a></li>
        <li><a href="#review-model-추가">Review Model 추가</a></li>
        <li><a href="#reservation-model-추가">Reservation Model 추가</a></li>
        <li><a href="#lists-add">lists add</a></li>
        <li><a href="#add-conversations">add conversations</a></li>
      </ul>
    </li>
    <li><a href="#room-adnin-검색-조건">ROOM ADNIN 검색 조건</a>
      <ul>
        <li><a href="#foreign-key-모델-검색">Foreign Key 모델 검색</a></li>
        <li><a href="#manytomany-가로-필터">manytomany 가로 필터</a></li>
      </ul>
    </li>
    <li><a href="#verify-email">Verify Email</a>
      <ul>
        <li><a href="#dotenv">Dotenv</a></li>
      </ul>
    </li>
    <li><a href="#deploy-to-eb">deploy to eb</a>
      <ul>
        <li><a href="#requirementstxt-만들기">requirements.txt 만들기</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="flask-vs-django">Flask vs Django</h2>
<h3 id="flask">Flask</h3>
<p>괭장히 작은 프레임워크. 데이터베이스, 이메일, 로그인, 로그아웃 등 모든 것을 다 만들어야 한다.</p>
<p>목표한 기능에 집중한다면 괜찮은 프레임워크</p>
<h3 id="django">Django</h3>
<p>거대한 프레임워크. 이미 많은 유틸리티가 장착되어있다</p>
<p>Pinterest, instagram</p>
<h2 id="pipenv">pipenv</h2>
<p>python 환경을 설정하는 package</p>
<h2 id="python3-사용">python3 사용</h2>
<p><code>pipenv --three</code></p>
<p>Pipfile이 생성된다</p>
<h3 id="pipfile">Pipfile</h3>
<p>packge-json과 같은 기능</p>
<h2 id="장고-설치">장고 설치</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pipenv shell
pip install Django==2.2.5
</code></pre></td></tr></table>
</div>
</div><h2 id="github">github</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">git branch -M main
</code></pre></td></tr></table>
</div>
</div><h2 id="config파일-만들기">config파일 만들기</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">django-admin startproject config
move config Aconfig
mv Aconfig/* .
rm -rf Aconfig
</code></pre></td></tr></table>
</div>
</div><h2 id="vs-code-extension-설치">vs code extension 설치</h2>
<p><code>Python</code></p>
<h2 id="python-version-확인">python version 확인</h2>
<figure>
    <img src="/images/python-version-check.png"
         alt="python version in VS code"/> 
</figure>

<h2 id="flake8-linter-설치">flake8 linter 설치</h2>
<p>.vscode &gt; settings.json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">&#34;python.linting.flake8Enabled&#34;: true,
&#34;python.linting.pylintEnabled&#34;: false,
&#34;python.linting.enabled&#34;: true,
&#34;python.formatting.provider&#34;: &#34;black&#34;,
&#34;python.linting.flake8Args&#34;: [&#34;--max-line-length=88&#34;]
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pipenv install flake8 --dev
</code></pre></td></tr></table>
</div>
</div><h2 id="formater-세팅">formater 세팅</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pipenv install black --dev --pre
</code></pre></td></tr></table>
</div>
</div><h2 id="timezone-change">timezone change</h2>
<p>settings.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">TIME_ZONE = &#34;Asia/Seoul&#34;
</code></pre></td></tr></table>
</div>
</div><h2 id="server-띄우기">server 띄우기</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py runserver
ctrl + C
</code></pre></td></tr></table>
</div>
</div><h2 id="migration">migration</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py migrate
</code></pre></td></tr></table>
</div>
</div><p>기본 데이터베이스를 만들기 위해 필요한 명령</p>
<h2 id="super-user-만들기">super user 만들기</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py createsuperuser
</code></pre></td></tr></table>
</div>
</div><h2 id="applicaitons-만들기">applicaitons 만들기</h2>
<p>application 명령어는 복수여야 한다</p>
<p>room -&gt; rooms</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">django-admin startapp rooms
django-admin startapp users
django-admin startapp reviews
django-admin startapp conversations
django-admin startapp lists
django-admin startapp reservations
</code></pre></td></tr></table>
</div>
</div><h2 id="users--modelspy-abstractuser-import">users &gt; models.py AbstractUser import</h2>
<p>users/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">AbstractUser</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">AbstractUser</span><span class="p">):</span>
    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="configsettingspy-에-추가된-model-적용">config/settings.py 에 추가된 model 적용</h2>
<p><code>delete db.sqlite3</code> 기존 db 삭제</p>
<p>config/settings.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">DJANGO_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;django.contrib.admin&#34;</span><span class="p">,</span>
    <span class="s2">&#34;django.contrib.auth&#34;</span><span class="p">,</span>
    <span class="s2">&#34;django.contrib.contenttypes&#34;</span><span class="p">,</span>
    <span class="s2">&#34;django.contrib.sessions&#34;</span><span class="p">,</span>
    <span class="s2">&#34;django.contrib.messages&#34;</span><span class="p">,</span>
    <span class="s2">&#34;django.contrib.staticfiles&#34;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;users.apps.UsersConfig&#34;</span><span class="p">]</span>

<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="n">DJANGO_APPS</span> <span class="o">+</span> <span class="n">PROJECT_APPS</span>


<span class="n">AUTH_USER_MODEL</span> <span class="o">=</span> <span class="s2">&#34;users.User&#34;</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="database-생성--create-model-user">database 생성 + Create Model User</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py makemigrations
</code></pre></td></tr></table>
</div>
</div><p>위 명령어를 치면 <code>users/migrations/0001_initial.py</code> 파일이 생김</p>
<p>아래 명령어로 마이그레이션 실행</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py migrate
python manage.py runserver
</code></pre></td></tr></table>
</div>
</div><p>마이그레이션 실행 후 서버 띄우기</p>
<h2 id="super-user-만들기-1">super user 만들기</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py createsuperuser
</code></pre></td></tr></table>
</div>
</div><h2 id="admin-penel에-user-추가">admin penel에 user 추가</h2>
<p>users/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>

<span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="user에-bio-추가">user에 bio 추가</h2>
<p>users/modals.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">AbstractUser</span><span class="p">):</span>
    <span class="n">avatar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">bio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><p><code>default=&quot;&quot;</code> <code>null=True</code>기존 data가 있을 경우 어떻게 채울 것인지를 정의한다</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py makemigrations
python manage.py migrate

</code></pre></td></tr></table>
</div>
</div><h2 id="pipenv-install-pillow">pipenv install Pillow</h2>
<p>ImageField에 사용될 Pillow 설치</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pipenv install Pillow
</code></pre></td></tr></table>
</div>
</div><h2 id="mirgration">mirgration</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">python manage.py makemigrations
python manage.py migrate
</code></pre></td></tr></table>
</div>
</div><h2 id="form-을-위한-null-처리">form 을 위한 null 처리</h2>
<p><code>null=True</code> database를 위한 null 처리</p>
<p><code>, blank=True</code> form validator를 위한 null 처리</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">AbstractUser</span><span class="p">):</span>

    <span class="n">GENDER_MALE</span> <span class="o">=</span> <span class="s2">&#34;mail&#34;</span>
    <span class="n">GENDER_FEMALE</span> <span class="o">=</span> <span class="s2">&#34;female&#34;</span>
    <span class="n">GENDER_OTHER</span> <span class="o">=</span> <span class="s2">&#34;other&#34;</span>

    <span class="n">GENDER_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">GENDER_MALE</span><span class="p">,</span> <span class="s2">&#34;mail&#34;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">GENDER_FEMALE</span><span class="p">,</span> <span class="s2">&#34;female&#34;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">GENDER_OTHER</span><span class="p">,</span> <span class="s2">&#34;other&#34;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">avatar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">GENDER_CHOICES</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>
    <span class="n">bio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="user-adminpy-설명">user admin.py 설명</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><p><code>@admin.register(models.User)</code> 이것과 <code>admin.site.register(models.User, CustomUserAdmin)</code> 은 같은 것</p>
<p>admin penel에서 User를 나타내라는 뜻</p>
<h2 id="admin-user-list에-칼럼-나타내기">admin user list에 칼럼 나타내기</h2>
<p>users/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;username&#34;</span><span class="p">,</span> <span class="s2">&#34;gender&#34;</span><span class="p">,</span> <span class="s2">&#34;language&#34;</span><span class="p">,</span> <span class="s2">&#34;currency&#34;</span><span class="p">,</span> <span class="s2">&#34;superhost&#34;</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="admin-user-list에-filter-추가">admin user list에 filter 추가</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;username&#34;</span><span class="p">,</span> <span class="s2">&#34;gender&#34;</span><span class="p">,</span> <span class="s2">&#34;language&#34;</span><span class="p">,</span> <span class="s2">&#34;currency&#34;</span><span class="p">,</span> <span class="s2">&#34;superhost&#34;</span><span class="p">)</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;superhost&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="admin-penel-에-useradmin을-적용하자">admin penel 에 UserAdmin을 적용하자</h2>
<p>위에껏은 지우고</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.admin</span> <span class="kn">import</span> <span class="n">UserAdmin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>

<span class="c1"># Register your models here.</span>
<span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">UserAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><p>이것을 하면 검색창이 포함된 유저 admin 패널이 나온다</p>
<h2 id="useradminfieldsets-합치기">UserAdmin.fieldsets 합치기</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">UserAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="n">UserAdmin</span><span class="o">.</span><span class="n">fieldsets</span> <span class="o">+</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="s2">&#34;Custom Profile&#34;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&#34;fields&#34;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="s2">&#34;avatar&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;gender&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;bio&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;birthday&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;language&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;currency&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;superhost&#34;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">},</span>
        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Django UserAdmin 속성과 Custom으로 작성한 속성을 합친다</p>
<h2 id="db-초기화">DB 초기화</h2>
<p>users/migrations 안에 있는 파일 삭제</p>
<p>db.sqlite3 삭제</p>
<p>users/models.py <code>null=True</code> 삭제</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">avatar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">gender</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">GENDER_CHOICES</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">bio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">birthday</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">LANGUAGE_CHOICES</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">currency</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">CURRENCY_CHOICES</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">superhost</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="rooms-만들기">Rooms 만들기</h2>
<p>settings.py 에 rooms 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;users.apps.UsersConfig&#34;</span><span class="p">,</span> <span class="s2">&#34;rooms.apps.RoomsConfig&#34;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Room</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><p>admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Room</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">RoomAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="core-app-생성">Core app 생성</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">django-admin startapp core
</code></pre></td></tr></table>
</div>
</div><p>cores/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">TimeStampedModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
</code></pre></td></tr></table>
</div>
</div><p><code>abstract = True</code> DB에 들어가지 않는 Database. 확장용 model. 추상모델
<code>auto_now_add=True</code> 생성할 때 추가
<code>auto_now=True</code> 저장할 때마다 업데이트</p>
<h2 id="core-model-적용">Core model 적용</h2>
<p>rooms/models</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Room</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">140</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="django-contries-library-사용">django-contries library 사용</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pipenv install django-countries
</code></pre></td></tr></table>
</div>
</div><p>settins.py THIRD_PARTY 에 django_countries 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">THIRD_PARTY_APPS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;django_countries&#34;</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>rooms/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Room</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">140</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">CountryField</span><span class="p">()</span>
    <span class="n">city</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">140</span><span class="p">)</span>
    <span class="n">guests</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">beds</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">bedrooms</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">baths</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">check_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TimeField</span><span class="p">()</span>
    <span class="n">check_out</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TimeField</span><span class="p">()</span>
    <span class="n">instant_book</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">host</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">user_models</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>on_delete=models.CASCADE</code> user를 지우면 room도 지워진다</p>
<p><code>on_delete=models.PROTECT</code> room을 소유하면 room을 지울 때 까지 user를 지울 수 없다</p>
<p><code>on_delete=models.SET_NULL</code> 유저가 사라지면 없는 채로 놔둔다</p>
<p><code>on_delete=models.SET_DEFAULT</code> room을 지우면 누구의 소유로 가게 하라</p>
<h2 id="room-필드-연결시-보여줄-내용-설계">Room 필드 연결시 보여줄 내용 설계</h2>
<p>rooms/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="k">class</span> <span class="nc">AbstractItem</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">RoomType</span><span class="p">(</span><span class="n">AbstractItem</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Room</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="n">room_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">RoomType</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="admin-penel에-roomtype-추가">admin penel에 RoomType 추가</h2>
<p>rooms/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">RoomType</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ItemAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="같은-방법으로-amenity-facility-houserole-추가">같은 방법으로 Amenity, Facility, HouseRole 추가</h2>
<p>rooms/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">RoomType</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Facility</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Amenity</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">HouseRole</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ItemAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="admin-penel-에-나오는-이름-변경">admin penel 에 나오는 이름 변경</h2>
<p><code>class Meta:</code> 를 이용하고 <code>verbose_name_plural</code>과 <code>verbose_name</code> 을 이용</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Facility</span><span class="p">(</span><span class="n">AbstractItem</span><span class="p">):</span>
    <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&#34;Facilities&#34;</span>

<span class="k">class</span> <span class="nc">HouseRole</span><span class="p">(</span><span class="n">AbstractItem</span><span class="p">):</span>
    <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;House Role&#34;</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="verbose_name_plural">verbose_name_plural</h3>
<p>If this isn’t given, Django will use verbose_name + &ldquo;s&rdquo;.</p>
<p><a href="https://docs.djangoproject.com/en/3.1/ref/models/options/">https://docs.djangoproject.com/en/3.1/ref/models/options/</a></p>
<h3 id="verbose_name">verbose_name</h3>
<p>&ldquo;이름&rdquo; + &ldquo;s&rdquo;</p>
<p>If this isn’t given, Django will use a munged version of the class name: CamelCase becomes camel case.</p>
<p><a href="https://docs.djangoproject.com/en/3.1/ref/models/options/">https://docs.djangoproject.com/en/3.1/ref/models/options/</a></p>
<h3 id="ordering-정렬-순서">ordering 정렬 순서</h3>
<p><code>ordering = ['-order_date']</code> -를 붙이면 역순 정렬이다</p>
<p><code>ordering = ['name']</code> 알파벳 정렬</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">RoomType</span><span class="p">(</span><span class="n">AbstractItem</span><span class="p">):</span>
    <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;Room Type&#34;</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;-created&#34;</span><span class="p">]</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="photo-model-만들기">photo model 만들기</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Photo</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">()</span>
    <span class="n">room</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Room</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">caption</span>

</code></pre></td></tr></table>
</div>
</div><p><code>ForeignKey</code> 설정을 &ldquo;Room&quot;으로 지정할 수 있다.</p>
<p>ForeignKey로 Room을 쓰려면 이전 코드에 class Room이 정의되어 있어야 한다</p>
<h3 id="review-model-추가">Review Model 추가</h3>
<p>config/PROJECT_APPS 에 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;core.apps.CoreConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;users.apps.UsersConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rooms.apps.RoomsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;reviews.apps.ReviesConfig&#34;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>reviews/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>

<span class="k">class</span> <span class="nc">Review</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;  Review Model Definition  &#34;&#34;&#34;</span>

    <span class="n">review</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">accuracy</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">communication</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">cleanliness</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">check_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;users.User&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">room</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;rooms.Room&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&#34;{self.review} - {self.room}&#34;</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="reservation-model-추가">Reservation Model 추가</h3>
<p>reservations/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>


<span class="k">class</span> <span class="nc">Reservation</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="s2">&#34;&#34;&#34; Reservation Model Definition &#34;&#34;&#34;</span>

    <span class="n">STATUS_PENDING</span> <span class="o">=</span> <span class="s2">&#34;pending&#34;</span>
    <span class="n">STATUS_CONFIRMED</span> <span class="o">=</span> <span class="s2">&#34;confirmed&#34;</span>
    <span class="n">STATUS_CANCELED</span> <span class="o">=</span> <span class="s2">&#34;canceled&#34;</span>

    <span class="n">STATUS_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">STATUS_PENDING</span><span class="p">,</span> <span class="s2">&#34;Pending&#34;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">STATUS_CONFIRMED</span><span class="p">,</span> <span class="s2">&#34;Confirmed&#34;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">STATUS_CANCELED</span><span class="p">,</span> <span class="s2">&#34;Canceled&#34;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">STATUS_CHOICES</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">STATUS_CONFIRMED</span>
    <span class="p">)</span>

    <span class="n">check_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">check_out</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="n">guest</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;users.User&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">room</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;rooms.Room&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&#34;{self.room - {self.check_in}}&#34;</span>

</code></pre></td></tr></table>
</div>
</div><p>reservations/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>


<span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Reservation</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ReservationAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34; Reservation Admin Definition &#34;&#34;&#34;</span>

    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><p>config/settings.py PROJECT_APPS에 추가</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;core.apps.CoreConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;users.apps.UsersConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rooms.apps.RoomsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;reviews.apps.ReviewsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;reservations.apps.ReservationsConfig&#34;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="lists-add">lists add</h3>
<p>settings에 lists 추가</p>
<p>config/settins.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;core.apps.CoreConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;users.apps.UsersConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rooms.apps.RoomsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;reviews.apps.ReviewsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;lists.apps.ListsConfig&#34;</span><span class="p">,</span>
<span class="p">]</span>

</code></pre></td></tr></table>
</div>
</div><p>lists/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">LIst</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="s2">&#34;&#34;&#34; List Model Definitions &#34;&#34;&#34;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;users.USer&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">rooms</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&#34;rooms.Room&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

</code></pre></td></tr></table>
</div>
</div><p>lists/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>


<span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">List</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ListAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="k">pass</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="add-conversations">add conversations</h3>
<p>config/settings.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;core.apps.CoreConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;users.apps.UsersConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;rooms.apps.RoomsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;reviews.apps.ReviewsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;lists.apps.ListsConfig&#34;</span><span class="p">,</span>
    <span class="s2">&#34;conversations.apps.ConversationsConfig&#34;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>conversations/models.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>


<span class="k">class</span> <span class="nc">Conversation</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="s2">&#34;&#34;&#34; Conversations Definition &#34;&#34;&#34;</span>

    <span class="n">participants</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&#34;users.User&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>

<span class="s2">&#34;&#34;&#34; self.created 는 tmxmfld 스트링 형식이 아니기 때문에 str()처리를 한다 &#34;&#34;&#34;</span>


<span class="k">class</span> <span class="nc">Message</span><span class="p">(</span><span class="n">core_models</span><span class="o">.</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="n">massage</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;users.User&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">conversation</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&#34;Converstion&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&#34;{self.user} says: {self.text}&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>conversations/admin.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>


<span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Message</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MessageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="k">pass</span>


<span class="nd">@admin.register</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Conversation</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ConversationAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="k">pass</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="room-adnin-검색-조건">ROOM ADNIN 검색 조건</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&#34;=city&#34;</span><span class="p">,</span>
    <span class="s2">&#34;^host__username&#34;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>^</code> 시작하는 단어로 검색해야 함
<code>=</code> 정확히 검색</p>
<h3 id="foreign-key-모델-검색">Foreign Key 모델 검색</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&#34;^host__username&#34;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>foreignKey__fieldNAme</code> 릴레이션 걸린 키도 검색할 수 있다.</p>
<h3 id="manytomany-가로-필터">manytomany 가로 필터</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">filter_horizontal</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&#34;amenities&#34;</span><span class="p">,</span>
    <span class="s2">&#34;facilities&#34;</span><span class="p">,</span>
    <span class="s2">&#34;house_rules&#34;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>검색이 되며 가로로 선택된 것들이 오른쪽 박스, 미선택이 왼쪽 박스에 배치되는 필터가 생긴다</p>
<h2 id="verify-email">Verify Email</h2>
<h3 id="dotenv">Dotenv</h3>
<p><a href="https://github.com/jpadilla/django-dotenv">https://github.com/jpadilla/django-dotenv</a></p>
<p>루트에 .env 파일을 만든다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pipenv shell
pipenv install django-dotenv
</code></pre></td></tr></table>
</div>
</div><p>manage.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s2">&#34;&#34;&#34;Django&#39;s command-line utility for administrative tasks.&#34;&#34;&#34;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">dotenv</span>  <span class="o">//</span> <span class="n">add</span>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dotenv</span><span class="o">.</span><span class="n">read_dotenv</span><span class="p">()</span> <span class="o">//</span> <span class="n">add</span>
    <span class="n">main</span><span class="p">()</span>


</code></pre></td></tr></table>
</div>
</div><h2 id="deploy-to-eb">deploy to eb</h2>
<h3 id="requirementstxt-만들기">requirements.txt 만들기</h3>
<p>빈스톡은 이 파일을 찾아 보둘을 만든다</p>
<p><code>pipenv install pipenv-to-requirements</code></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2021-04-12</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/study/">study</a>,&nbsp;<a href="/tags/python/">python</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/commit-message-on-git/" class="prev" rel="prev" title="좋은 Commit Message"><i class="fas fa-angle-left fa-fw"></i>좋은 Commit Message</a>
            <a href="/django-explain/" class="next" rel="next" title="Django 설명">Django 설명<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://iloveu.design" target="_blank">ahntae</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
